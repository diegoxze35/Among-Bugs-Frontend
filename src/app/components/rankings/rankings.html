<div class="rankings-container">
  <div class="rankings-header">
    <h1>Tabla de Rankings</h1>
  </div>

  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Cargando rankings...</p>
  </div>

  <div *ngIf="error" class="error-message">
    <span class="error-icon"></span>
    <p>{{ error }}</p>
    <button class="retry-button" (click)="loadRankings()">Reintentar</button>
  </div>

  <div *ngIf="!loading && !error && rankings.length === 0" class="empty-state">
    <img src="ranking.png">
    <h2>No hay rankings disponibles</h2>
    <p>Todav√≠a no se han completado trivias. ¬°S√© el primero en jugar!</p>
  </div>

  <div *ngIf="!loading && !error && rankings.length > 0" class="rankings-table-container">
    <table class="rankings-table">
      <thead>
        <tr>
          <th class="rank-column">Posici√≥n</th>
          <th>Jugador</th>
          <th>Trivia</th>
          <th>Puntaje</th>
          <th>Porcentaje</th>
          <th>Tiempo</th>
          <th>Fecha</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ranking of rankings; let i = index"
            [class.top-1]="i === 0"
            [class.top-2]="i === 1"
            [class.top-3]="i === 2">
          <td class="rank-column">
            <span class="rank-badge" [class.gold]="i === 0" [class.silver]="i === 1" [class.bronze]="i === 2">
              <span *ngIf="i === 0">ü•á</span>
              <span *ngIf="i === 1">ü•à</span>
              <span *ngIf="i === 2">ü•â</span>
              <span *ngIf="i > 2">{{ i + 1 }}</span>
            </span>
          </td>
          <td class="player-column">
            <strong>{{ ranking.playerUsername }}</strong>
          </td>
          <td class="trivia-column">{{ ranking.triviaTitle }}</td>
          <td class="score-column">
            <span class="score-badge">
              {{ ranking.correctAnswers }} / {{ ranking.totalQuestions }}
            </span>
          </td>
          <td class="percentage-column">
            <div class="percentage-bar">
              <div class="percentage-fill" [style.width.%]="ranking.percentage"></div>
              <span class="percentage-text">{{ ranking.percentage }}%</span>
            </div>
          </td>
          <td class="time-column">
            <span class="time-badge">‚è±Ô∏è {{ formatTime(ranking.completionTimeSeconds) }}</span>
          </td>
          <td class="date-column">{{ formatDate(ranking.attemptDate) }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
